(function($){$(document).ready(function(){collection.init()}),$(".engoj-collection-sidebar")&&History.Adapter.bind(window,"statechange",function(){var State=History.getState();if(!collection.fillterClick){collection.filterParams();var newurl=collection.filterCreateUrl();collection.filterGetContent(newurl),collection.resetFilter()}collection.fillterClick=!1});var collection={init:function(){this.initCollectionFilter(),this.initCollectionShow(),this.initCollectionSorting()},initReview:function(){},initToggle:function(){},filterCategories:function(){},fillterTagEvents:function(){$("body").delegate('.filter-tag a:not(".clear"), .filter-tag label',"click",function(e){$(this).toggleClass("active");var selected=$(this).text(),text1="";$(this).closest(".dropdown").find(".dropdown-label").text(selected),$(this).hasClass("active")||$(this).closest(".dropdown").find(".dropdown-label").text(text1);var currentTags=[];if(Shopify.queryParams.constraint&&(currentTags=Shopify.queryParams.constraint.split("+")),!window.filter_mul_choice&&!$(this).prev().is(":checked")){var otherTag=$(this).parents(".filter-tag").find("input:checked");if(otherTag.length>0){var tagName=otherTag.val();if(tagName){var tagPos=currentTags.indexOf(tagName);tagPos>=0&&currentTags.splice(tagPos,1)}}}var tagName=$(this).prev().val();if(tagName){var tagPos=currentTags.indexOf(tagName);tagPos>=0?currentTags.splice(tagPos,1):currentTags.push(tagName)}currentTags.length?Shopify.queryParams.constraint=currentTags.join("+"):delete Shopify.queryParams.constraint,collection.filterAjaxClick(),e.preventDefault()})},filterMapClearAll:function(){$("body").delegate("click",".refined-widgets a.clear-all",function(e){delete Shopify.queryParams.constraint,delete Shopify.queryParams.q,collection.filterAjaxClick(),e.preventDefault()}),$("body").delegate(".filter-block .clear","click",function(e){var currentTags=[],filterTag=$(this).parent().parent();Shopify.queryParams.constraint&&(currentTags=Shopify.queryParams.constraint.split("+")),filterTag.find("input:checked").each(function(){var selectedTag=$(this),tagName=selectedTag.val();if(tagName){var tagPos=currentTags.indexOf(tagName);tagPos>=0&&currentTags.splice(tagPos,1)}}),filterTag.find("a").each(function(){$(this).removeClass("active")}),currentTags.length?Shopify.queryParams.constraint=currentTags.join("+"):delete Shopify.queryParams.constraint,collection.filterAjaxClick(),e.preventDefault()})},filterMapClear:function(){$(".filter-tag").each(function(){var filterTag=$(this);filterTag.find("input:checked").length>0&&filterTag.find(".clear").show()})},filterParams:function(){if(Shopify.queryParams={},location.search.length)for(var aKeyValue,i=0,aCouples=location.search.substr(1).split("&");i<aCouples.length;i++)aKeyValue=aCouples[i].split("="),aKeyValue.length>1&&(Shopify.queryParams[decodeURIComponent(aKeyValue[0])]=decodeURIComponent(aKeyValue[1]))},filterMapEvents:function(){collection.fillterTagEvents()},resetFilter:function(){$(".filter-custom .active, .filter-links .active").removeClass("active"),$(".filter-tag input:checked").attr("checked",!1);var cat=location.pathname.match(/\/collections\/(.*)(\?)?/);cat&&cat[1]&&$(".filter-links a[href='"+cat[0]+"']").addClass("active")},filterMapData:function(data){var currentList=$(".product-collection-grid"),productList=$(data).find(".product-collection-grid");currentList.replaceWith(productList),$(".pagination").length>0&&$(".pagination").replaceWith($(data).find(".pagination")),$(".filter-blocks").replaceWith($(data).find(".filter-blocks")),collection.filterMapClear()},filterCreateUrl:function(baseLink){var newQuery=$.param(Shopify.queryParams).replace(/%2B/g,"+");return baseLink?newQuery!=""?baseLink+"?"+newQuery:baseLink:location.pathname+"?"+newQuery},filterAjaxClick:function(baseLink){delete Shopify.queryParams.page;var newurl=collection.filterCreateUrl(baseLink);collection.fillterClick=!0,History.pushState({param:Shopify.queryParams},newurl,newurl),collection.filterGetContent(newurl)},filterGetContent:function(newurl){$.ajax({type:"get",url:newurl,beforeSend:function(){showPopup(".loading")},success:function(data){collection.filterMapData(data),collection.filterMapClear(),hidePopup(".loading")},error:function(xhr,text){hidePopup(".loading"),$(".ajax-error-message").text($.parseJSON(xhr.responseText).description),showPopup(".ajax-error-modal")}})},initCollectionFilter:function(){$(".engoj-collection-sidebar").length>0&&(collection.filterParams(),collection.filterMapEvents(),collection.filterMapClear(),collection.filterMapClearAll())},initCollectionSorting:function(e){$(".wrap-filter-sorting a").click(function(e2){e2.preventDefault(),$(this).parent().hasClass("active")||(Shopify.queryParams.sort_by=$(this).attr("href"),collection.filterAjaxClick(),$(".wrap-filter-sorting li.active").removeClass("active"),$(this).parent().addClass("active"));var selected=$(this).text();$(this).closest(".dropdown").find(".dropdown-label").text(selected),$(this).closest(".dropdown-toggle").removeClass("active")})},initCollectionViewMode:function(){},initCollectionShow:function(){$(".filter-show a").click(function(e){if(e.preventDefault(),!$(this).parent().hasClass("active")){var currentPage=$(this).attr("href"),view=$(".button-view a.active").attr("data-mode");view=="list"?Shopify.queryParams.view="list"+currentPage:Shopify.queryParams.view=currentPage,collection.filterAjaxClick(),$(".filter-show li.active").removeClass("active"),$(this).parent().addClass("active"),$(this).closest(".dropdown").find(".dropdown-label").text(currentPage),$(this).closest(".dropdown-content").removeClass("active")}})},initPaging:function(){}}})(jQuery);
//# sourceMappingURL=/cdn/shop/t/9/assets/collection.js.map?v=173766977713674313801552289359
